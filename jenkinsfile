pipeline {
    agent any

    tools {
        maven 'maven'
          
    }

    environment {
        // Variables d'environnement pour SonarQube
        SONARQUBE_URL = 'http://sonarqube:9000'  // URL de votre instance SonarQube
        SONARQUBE_TOKEN = credentials('tokenSonar') // Token d'authentification pour SonarQube
    }

    stages {
        // Étape 1 : Intégration avec GitHub (Webhook déjà configuré)
        stage('Git Checkout') {
            steps {
                 checkout scm
                //git url: 'https://github.com/username/repository.git', branch: 'main'
            }
        }

       

    post {
        always {
            // Action à effectuer après l'exécution du pipeline, comme nettoyer les ressources
            cleanWs()  // Nettoyer l'espace de travail Jenkins
        }
        success {
            // Action à effectuer si le pipeline réussit
            echo 'Pipeline executed successfully!'
        }
        failure {
            // Action à effectuer en cas d'échec
            echo 'Pipeline failed!'
        }
    }
}
